<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titanic Survival Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f7fafc;
            padding-top: 50px;
        }

        .card {
            border-radius: 15px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .btn-teal {
            background-color: #319795;
            color: white;
        }

        .btn-teal:hover {
            background-color: #2c7a7b;
            color: white;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card p-4">
                    <h2 class="text-center mb-2" style="color: #2c7a7b;">Titanic Survival AI ðŸš¢</h2>
                    <p class="text-center text-muted mb-4">Enter passenger details to predict survival.</p>

                    <form id="predictionForm">
                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label">Passenger Class</label>
                                <select class="form-select" name="Pclass">
                                    <option value="1">1st Class (Rich)</option>
                                    <option value="2">2nd Class (Middle)</option>
                                    <option value="3" selected>3rd Class (Poor)</option>
                                </select>
                            </div>
                            <div class="col">
                                <label class="form-label">Sex</label>
                                <select class="form-select" name="Sex">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label">Age</label>
                                <input type="number" class="form-control" name="Age" placeholder="e.g. 22" required>
                            </div>
                            <div class="col">
                                <label class="form-label">Fare ($)</label>
                                <input type="number" class="form-control" name="Fare" placeholder="e.g. 7.25" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label">Siblings/Spouse</label>
                                <input type="number" class="form-control" name="SibSp" value="0">
                            </div>
                            <div class="col">
                                <label class="form-label">Parents/Kids</label>
                                <input type="number" class="form-control" name="Parch" value="0">
                            </div>
                            <div class="col">
                                <label class="form-label">Embarked</label>
                                <select class="form-select" name="Embarked">
                                    <option value="S">Southampton</option>
                                    <option value="C">Cherbourg</option>
                                    <option value="Q">Queenstown</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">Cabin (Optional)</label>
                            <input type="text" class="form-control" name="Cabin" placeholder="e.g. C85">
                        </div>

                        <button type="submit" class="btn btn-teal w-100 btn-lg" id="predictBtn">Predict
                            Survival</button>
                    </form>

                    <div id="resultContainer" class="mt-4 p-3 rounded text-center" style="display: none;">
                        <h3 id="predictionText"></h3>
                        <p id="probabilityText" class="fw-bold lead"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const btn = document.getElementById('predictBtn');
            const originalText = btn.innerText;
            btn.innerText = "Analyzing...";
            btn.disabled = true;

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(result => {
                    const container = document.getElementById('resultContainer');
                    const title = document.getElementById('predictionText');
                    const prob = document.getElementById('probabilityText');

                    container.style.display = 'block';
                    title.innerText = result.prediction;
                    prob.innerText = "Probability: " + result.probability + "%";

                    if (result.prediction === "Survived") {
                        container.style.backgroundColor = "#d1fae5";
                        container.style.border = "1px solid #34d399";
                        title.style.color = "#065f46";
                    } else {
                        container.style.backgroundColor = "#fee2e2";
                        container.style.border = "1px solid #f87171";
                        title.style.color = "#991b1b";
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("Error connecting to the server.");
                })
                .finally(() => {
                    btn.innerText = originalText;
                    btn.disabled = false;
                });
        });
    </script>

</body>

</html>